import{u as U,s as ze,r as Ae,b as ae}from"./api.cd297811.js";import{k as Ie,l as Me,r as de,o as j,c as ee,a as g,b as x,d as F,t as le,u as P,_ as Be,g as X,p as $e,m as He,n as we,q as ie,f as pe,h as Ne,s as ke,x as be,y as re,z as ce,A as ue,w as fe,v as me,B as Q,C as qe,D as Oe,E as Pe}from"./index.7d37a87d.js";const Ve={width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",role:"img",focusable:"false"};function G(b,p){return{name:b,render(){return Ie("svg",Object.assign(Object.assign({},Ve),{innerHTML:p}))}}}const Ce=G("BIconArrowRepeat",'<path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/><path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>'),je=G("BIconBoxArrowInRight",'<path fill-rule="evenodd" d="M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0v-2z"/><path fill-rule="evenodd" d="M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>'),De=G("BIconBoxes",'<path d="M7.752.066a.5.5 0 0 1 .496 0l3.75 2.143a.5.5 0 0 1 .252.434v3.995l3.498 2A.5.5 0 0 1 16 9.07v4.286a.5.5 0 0 1-.252.434l-3.75 2.143a.5.5 0 0 1-.496 0l-3.502-2-3.502 2.001a.5.5 0 0 1-.496 0l-3.75-2.143A.5.5 0 0 1 0 13.357V9.071a.5.5 0 0 1 .252-.434L3.75 6.638V2.643a.5.5 0 0 1 .252-.434L7.752.066ZM4.25 7.504 1.508 9.071l2.742 1.567 2.742-1.567L4.25 7.504ZM7.5 9.933l-2.75 1.571v3.134l2.75-1.571V9.933Zm1 3.134 2.75 1.571v-3.134L8.5 9.933v3.134Zm.508-3.996 2.742 1.567 2.742-1.567-2.742-1.567-2.742 1.567Zm2.242-2.433V3.504L8.5 5.076V8.21l2.75-1.572ZM7.5 8.21V5.076L4.75 3.504v3.134L7.5 8.21ZM5.258 2.643 8 4.21l2.742-1.567L8 1.076 5.258 2.643ZM15 9.933l-2.75 1.571v3.134L15 13.067V9.933ZM3.75 14.638v-3.134L1 9.933v3.134l2.75 1.571Z"/>'),Te=G("BIconCalculator",'<path d="M12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h8zM4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4z"/><path d="M4 2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5v-2zm0 4a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm0 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm0 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm3-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm0 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm0 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm3-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm0 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-4z"/>'),We=G("BIconDashSquare",'<path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/><path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"/>'),Fe=G("BIconDiagram3Fill",'<path fill-rule="evenodd" d="M6 3.5A1.5 1.5 0 0 1 7.5 2h1A1.5 1.5 0 0 1 10 3.5v1A1.5 1.5 0 0 1 8.5 6v1H14a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0V8h-5v.5a.5.5 0 0 1-1 0V8h-5v.5a.5.5 0 0 1-1 0v-1A.5.5 0 0 1 2 7h5.5V6A1.5 1.5 0 0 1 6 4.5v-1zm-6 8A1.5 1.5 0 0 1 1.5 10h1A1.5 1.5 0 0 1 4 11.5v1A1.5 1.5 0 0 1 2.5 14h-1A1.5 1.5 0 0 1 0 12.5v-1zm6 0A1.5 1.5 0 0 1 7.5 10h1a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 8.5 14h-1A1.5 1.5 0 0 1 6 12.5v-1zm6 0a1.5 1.5 0 0 1 1.5-1.5h1a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1-1.5 1.5h-1a1.5 1.5 0 0 1-1.5-1.5v-1z"/>'),Xe=G("BIconPercent",'<path d="M13.442 2.558a.625.625 0 0 1 0 .884l-10 10a.625.625 0 1 1-.884-.884l10-10a.625.625 0 0 1 .884 0zM4.5 6a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 1a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5zm7 6a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 1a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/>'),Ue=G("BIconPlusSquare",'<path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>'),Ye=G("BIconPrinter",'<path d="M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/><path d="M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"/>'),Je=G("BIconShuffle",'<path fill-rule="evenodd" d="M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827 1.24 4.874 2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A9.624 9.624 0 0 0 7.556 8a9.624 9.624 0 0 0 1.317 1.918C9.828 10.99 11.204 12 13 12v1c-2.202 0-3.827-1.24-4.874-2.418A10.595 10.595 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.624 9.624 0 0 0 6.444 8a9.624 9.624 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5z"/><path d="M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192zm0 9v-3.932a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192z"/>'),Ze=G("BIconSlashSquare",'<path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/><path d="M11.354 4.646a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708l6-6a.5.5 0 0 1 .708 0z"/>'),Ge=G("BIconXSquare",'<path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>'),Ke={class:"absolute bottom-0 border-t max-w-full w-full p-3 font-normal"},Qe={class:"inline-flex font-semibold"},et={__name:"FooterInfo",setup(b){const p=U(),i=Me(()=>p.nodesProgram.length);return(y,v)=>{const w=de("font-icon");return j(),ee("footer",Ke,[g("h1",null,[x(w,{icon:"fa-solid fa-code"}),F(" "+le(P(p).nameProgram),1)]),g("h1",null,"# "+le(P(p).idProgram),1),g("h1",Qe,[x(P(Fe),{class:"mr-2 text-xl"}),F(" "+le(P(i))+" Nodes ",1)])])}}};const tt=b=>($e("data-v-a4077097"),b=b(),He(),b),nt={class:"w-56 border-r h-screen bg-color","aria-label":"Sidebar"},ot={class:"py-4 text-white min-h-screen relative"},st={class:"space-y-2 overflow-y-auto"},it={class:"flex border-b mx-3"},at=tt(()=>g("h1",{class:"font-bold text-2xl tracking-tight text-white mb-1"}," Code:Node ",-1)),lt=F(" Variable "),dt=F(" Assign "),rt=F(" Math Operation "),ct=F(" Logic Operation "),ut=F(" Cycle "),ht=F(" Print "),pt={__name:"SidebarMenu",setup(b){const p=i=>{i.dataTransfer.setData("node",i.target.getAttribute("data-node"))};return(i,y)=>{const v=de("font-icon"),w=de("router-link");return j(),ee("aside",nt,[g("div",ot,[g("ul",st,[x(w,{to:"/"},{default:X(()=>[g("div",it,[x(v,{icon:"fa-solid fa-laptop-code",size:"2x",class:"mr-3"}),at])]),_:1}),g("li",{class:"py-3 border-b mx-3 px-4",draggable:"true",onDragstart:y[0]||(y[0]=h=>p(h)),"data-node":"variable"},[x(v,{icon:"fa fa-cubes"}),lt],32),g("li",{class:"py-3 border-b mx-3 px-4",draggable:"true",onDragstart:y[1]||(y[1]=h=>p(h)),"data-node":"assign"},[x(v,{icon:"fa-solid fa-arrow-right-to-bracket"}),dt],32),g("li",{class:"py-3 border-b mx-3 px-4",draggable:"true",onDragstart:y[2]||(y[2]=h=>p(h)),"data-node":"math"},[x(v,{icon:"fa fa-calculator"}),rt],32),g("li",{class:"py-3 border-b mx-3 px-4",draggable:"true",onDragstart:y[3]||(y[3]=h=>p(h)),"data-node":"logic"},[x(v,{icon:"fa-solid fa-code-merge"}),ct],32),g("li",{class:"py-3 border-b mx-3 px-4",draggable:"true",onDragstart:y[4]||(y[4]=h=>p(h)),"data-node":"cicle"},[x(v,{icon:"fa-solid fa-code-compare"}),ut],32),g("li",{class:"py-3 border-b mx-3 px-4",draggable:"true",onDragstart:y[5]||(y[5]=h=>p(h)),"data-node":"print"},[x(v,{icon:"fa-solid fa-print"}),ht],32),x(et)])])])}}},ft=Be(pt,[["__scopeId","data-v-a4077097"]]),mt=U(),xe=b=>{let p="";for(const i of b){const{parentNode:y,pythonCode:v,type:w}=i;!y&&w!=="MathOperation"&&(p+=`${v} 
`)}mt.pythonCode=p};const _t={class:"w-full"},gt={class:"flex items-center justify-between bg-color text-white py-2"},vt={class:"w-full flex justify-between px-32 font-bold self-center"},wt=F(" Save "),yt=F(" Execute "),bt=F(" To Python "),Ct={class:"px-5 py-1 rounded-full border-2 transition duration-150 hover:bg-blue-900"},xt=F(" Help "),Rt={__name:"HeaderBoard",setup(b){const p=U(),i=we("emitter"),y=()=>xe(p.nodesProgram),v=()=>{i.emit("saveProgram"),ze(w)},w=e=>{i.emit("showNotification",e)},h=()=>{xe(p.nodesProgram),Ae()};return(e,t)=>{const n=de("font-icon");return j(),ee("header",_t,[g("nav",gt,[g("div",vt,[g("button",{class:"px-5 py-1 rounded-full border-2 transition duration-150 hover:bg-blue-900",onClick:v},[x(n,{icon:"fa-solid fa-floppy-disk"}),wt]),g("button",{class:"px-5 py-1 rounded-full border-2 transition duration-150 hover:bg-blue-900",onClick:h},[x(n,{icon:"fa-solid fa-play"}),yt]),g("button",{class:"px-5 py-1 rounded-full border-2 transition duration-150 hover:bg-blue-900",onClick:y},[x(n,{icon:"fa-brands fa-python"}),bt]),g("button",Ct,[x(n,{icon:"fa-solid fa-circle-question"}),xt])])])])}}};var It=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bt(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}var Le={exports:{}};(function(b,p){(function(i,y){b.exports=y()})(typeof self<"u"?self:It,function(){return function(i){var y={};function v(w){if(y[w])return y[w].exports;var h=y[w]={i:w,l:!1,exports:{}};return i[w].call(h.exports,h,h.exports,v),h.l=!0,h.exports}return v.m=i,v.c=y,v.d=function(w,h,e){v.o(w,h)||Object.defineProperty(w,h,{enumerable:!0,get:e})},v.r=function(w){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})},v.t=function(w,h){if(1&h&&(w=v(w)),8&h||4&h&&typeof w=="object"&&w&&w.__esModule)return w;var e=Object.create(null);if(v.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:w}),2&h&&typeof w!="string")for(var t in w)v.d(e,t,function(n){return w[n]}.bind(null,t));return e},v.n=function(w){var h=w&&w.__esModule?function(){return w.default}:function(){return w};return v.d(h,"a",h),h},v.o=function(w,h){return Object.prototype.hasOwnProperty.call(w,h)},v.p="",v(v.s=0)}([function(i,y,v){v.r(y),v.d(y,"default",function(){return w});class w{constructor(e,t=null,n=null){this.events={},this.container=e,this.precanvas=null,this.nodeId=1,this.ele_selected=null,this.node_selected=null,this.drag=!1,this.reroute=!1,this.reroute_fix_curvature=!1,this.curvature=.5,this.reroute_curvature_start_end=.5,this.reroute_curvature=.5,this.reroute_width=6,this.drag_point=!1,this.editor_selected=!1,this.connection=!1,this.connection_ele=null,this.connection_selected=null,this.canvas_x=0,this.canvas_y=0,this.pos_x=0,this.pos_x_start=0,this.pos_y=0,this.pos_y_start=0,this.mouse_x=0,this.mouse_y=0,this.line_path=5,this.first_click=null,this.force_first_input=!1,this.draggable_inputs=!0,this.useuuid=!1,this.parent=n,this.noderegister={},this.render=t,this.drawflow={drawflow:{Home:{data:{}}}},this.module="Home",this.editor_mode="edit",this.zoom=1,this.zoom_max=1.6,this.zoom_min=.5,this.zoom_value=.1,this.zoom_last_value=1,this.evCache=new Array,this.prevDiff=-1}start(){this.container.classList.add("parent-drawflow"),this.container.tabIndex=0,this.precanvas=document.createElement("div"),this.precanvas.classList.add("drawflow"),this.container.appendChild(this.precanvas),this.container.addEventListener("mouseup",this.dragEnd.bind(this)),this.container.addEventListener("mousemove",this.position.bind(this)),this.container.addEventListener("mousedown",this.click.bind(this)),this.container.addEventListener("touchend",this.dragEnd.bind(this)),this.container.addEventListener("touchmove",this.position.bind(this)),this.container.addEventListener("touchstart",this.click.bind(this)),this.container.addEventListener("contextmenu",this.contextmenu.bind(this)),this.container.addEventListener("keydown",this.key.bind(this)),this.container.addEventListener("wheel",this.zoom_enter.bind(this)),this.container.addEventListener("input",this.updateNodeValue.bind(this)),this.container.addEventListener("dblclick",this.dblclick.bind(this)),this.container.onpointerdown=this.pointerdown_handler.bind(this),this.container.onpointermove=this.pointermove_handler.bind(this),this.container.onpointerup=this.pointerup_handler.bind(this),this.container.onpointercancel=this.pointerup_handler.bind(this),this.container.onpointerout=this.pointerup_handler.bind(this),this.container.onpointerleave=this.pointerup_handler.bind(this),this.load()}pointerdown_handler(e){this.evCache.push(e)}pointermove_handler(e){for(var t=0;t<this.evCache.length;t++)if(e.pointerId==this.evCache[t].pointerId){this.evCache[t]=e;break}if(this.evCache.length==2){var n=Math.abs(this.evCache[0].clientX-this.evCache[1].clientX);this.prevDiff>100&&(n>this.prevDiff&&this.zoom_in(),n<this.prevDiff&&this.zoom_out()),this.prevDiff=n}}pointerup_handler(e){this.remove_event(e),this.evCache.length<2&&(this.prevDiff=-1)}remove_event(e){for(var t=0;t<this.evCache.length;t++)if(this.evCache[t].pointerId==e.pointerId){this.evCache.splice(t,1);break}}load(){for(var e in this.drawflow.drawflow[this.module].data)this.addNodeImport(this.drawflow.drawflow[this.module].data[e],this.precanvas);if(this.reroute)for(var e in this.drawflow.drawflow[this.module].data)this.addRerouteImport(this.drawflow.drawflow[this.module].data[e]);for(var e in this.drawflow.drawflow[this.module].data)this.updateConnectionNodes("node-"+e);const t=this.drawflow.drawflow;let n=1;Object.keys(t).map(function(s,o){Object.keys(t[s].data).map(function(l,r){parseInt(l)>=n&&(n=parseInt(l)+1)})}),this.nodeId=n}removeReouteConnectionSelected(){this.dispatch("connectionUnselected",!0),this.reroute_fix_curvature&&this.connection_selected.parentElement.querySelectorAll(".main-path").forEach((e,t)=>{e.classList.remove("selected")})}click(e){if(this.dispatch("click",e),this.editor_mode==="fixed"){if(e.preventDefault(),e.target.classList[0]!=="parent-drawflow"&&e.target.classList[0]!=="drawflow")return!1;this.ele_selected=e.target.closest(".parent-drawflow")}else this.editor_mode==="view"?(e.target.closest(".drawflow")!=null||e.target.matches(".parent-drawflow"))&&(this.ele_selected=e.target.closest(".parent-drawflow"),e.preventDefault()):(this.first_click=e.target,this.ele_selected=e.target,e.button===0&&this.contextmenuDel(),e.target.closest(".drawflow_content_node")!=null&&(this.ele_selected=e.target.closest(".drawflow_content_node").parentElement));switch(this.ele_selected.classList[0]){case"drawflow-node":this.node_selected!=null&&(this.node_selected.classList.remove("selected"),this.node_selected!=this.ele_selected&&this.dispatch("nodeUnselected",!0)),this.connection_selected!=null&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.node_selected!=this.ele_selected&&this.dispatch("nodeSelected",this.ele_selected.id.slice(5)),this.node_selected=this.ele_selected,this.node_selected.classList.add("selected"),this.draggable_inputs?e.target.tagName!=="SELECT"&&(this.drag=!0):e.target.tagName!=="INPUT"&&e.target.tagName!=="TEXTAREA"&&e.target.tagName!=="SELECT"&&e.target.hasAttribute("contenteditable")!==!0&&(this.drag=!0);break;case"output":this.connection=!0,this.node_selected!=null&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),this.connection_selected!=null&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.drawConnection(e.target);break;case"parent-drawflow":case"drawflow":this.node_selected!=null&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),this.connection_selected!=null&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.editor_selected=!0;break;case"main-path":this.node_selected!=null&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),this.connection_selected!=null&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.connection_selected=this.ele_selected,this.connection_selected.classList.add("selected");const t=this.connection_selected.parentElement.classList;t.length>1&&(this.dispatch("connectionSelected",{output_id:t[2].slice(14),input_id:t[1].slice(13),output_class:t[3],input_class:t[4]}),this.reroute_fix_curvature&&this.connection_selected.parentElement.querySelectorAll(".main-path").forEach((n,s)=>{n.classList.add("selected")}));break;case"point":this.drag_point=!0,this.ele_selected.classList.add("selected");break;case"drawflow-delete":this.node_selected&&this.removeNodeId(this.node_selected.id),this.connection_selected&&this.removeConnection(),this.node_selected!=null&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),this.connection_selected!=null&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null)}e.type==="touchstart"?(this.pos_x=e.touches[0].clientX,this.pos_x_start=e.touches[0].clientX,this.pos_y=e.touches[0].clientY,this.pos_y_start=e.touches[0].clientY,this.mouse_x=e.touches[0].clientX,this.mouse_y=e.touches[0].clientY):(this.pos_x=e.clientX,this.pos_x_start=e.clientX,this.pos_y=e.clientY,this.pos_y_start=e.clientY),["input","output","main-path"].includes(this.ele_selected.classList[0])&&e.preventDefault(),this.dispatch("clickEnd",e)}position(e){if(e.type==="touchmove")var t=e.touches[0].clientX,n=e.touches[0].clientY;else t=e.clientX,n=e.clientY;if(this.connection&&this.updateConnection(t,n),this.editor_selected&&(s=this.canvas_x+-(this.pos_x-t),o=this.canvas_y+-(this.pos_y-n),this.dispatch("translate",{x:s,y:o}),this.precanvas.style.transform="translate("+s+"px, "+o+"px) scale("+this.zoom+")"),this.drag){e.preventDefault();var s=(this.pos_x-t)*this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom),o=(this.pos_y-n)*this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom);this.pos_x=t,this.pos_y=n,this.ele_selected.style.top=this.ele_selected.offsetTop-o+"px",this.ele_selected.style.left=this.ele_selected.offsetLeft-s+"px",this.drawflow.drawflow[this.module].data[this.ele_selected.id.slice(5)].pos_x=this.ele_selected.offsetLeft-s,this.drawflow.drawflow[this.module].data[this.ele_selected.id.slice(5)].pos_y=this.ele_selected.offsetTop-o,this.updateConnectionNodes(this.ele_selected.id)}if(this.drag_point){s=(this.pos_x-t)*this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom),o=(this.pos_y-n)*this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom),this.pos_x=t,this.pos_y=n;var l=this.pos_x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom)),r=this.pos_y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom));this.ele_selected.setAttributeNS(null,"cx",l),this.ele_selected.setAttributeNS(null,"cy",r);const f=this.ele_selected.parentElement.classList[2].slice(9),d=this.ele_selected.parentElement.classList[1].slice(13),a=this.ele_selected.parentElement.classList[3],c=this.ele_selected.parentElement.classList[4];let u=Array.from(this.ele_selected.parentElement.children).indexOf(this.ele_selected)-1;this.reroute_fix_curvature&&(u-=this.ele_selected.parentElement.querySelectorAll(".main-path").length-1,u<0&&(u=0));const m=f.slice(5),_=this.drawflow.drawflow[this.module].data[m].outputs[a].connections.findIndex(function(R,I){return R.node===d&&R.output===c});this.drawflow.drawflow[this.module].data[m].outputs[a].connections[_].points[u]={pos_x:l,pos_y:r};const C=this.ele_selected.parentElement.classList[2].slice(9);this.updateConnectionNodes(C)}e.type==="touchmove"&&(this.mouse_x=t,this.mouse_y=n),this.dispatch("mouseMove",{x:t,y:n})}dragEnd(e){if(e.type==="touchend")var t=this.mouse_x,n=this.mouse_y,s=document.elementFromPoint(t,n);else t=e.clientX,n=e.clientY,s=e.target;if(this.drag&&(this.pos_x_start==t&&this.pos_y_start==n||this.dispatch("nodeMoved",this.ele_selected.id.slice(5))),this.drag_point&&(this.ele_selected.classList.remove("selected"),this.pos_x_start==t&&this.pos_y_start==n||this.dispatch("rerouteMoved",this.ele_selected.parentElement.classList[2].slice(14))),this.editor_selected&&(this.canvas_x=this.canvas_x+-(this.pos_x-t),this.canvas_y=this.canvas_y+-(this.pos_y-n),this.editor_selected=!1),this.connection===!0)if(s.classList[0]==="input"||this.force_first_input&&(s.closest(".drawflow_content_node")!=null||s.classList[0]==="drawflow-node")){if(!this.force_first_input||s.closest(".drawflow_content_node")==null&&s.classList[0]!=="drawflow-node")o=s.parentElement.parentElement.id,l=s.classList[1];else{if(s.closest(".drawflow_content_node")!=null)var o=s.closest(".drawflow_content_node").parentElement.id;else var o=s.id;if(Object.keys(this.getNodeFromId(o.slice(5)).inputs).length===0)var l=!1;else var l="input_1"}var r=this.ele_selected.parentElement.parentElement.id,f=this.ele_selected.classList[1];if(r!==o&&l!==!1){if(this.container.querySelectorAll(".connection.node_in_"+o+".node_out_"+r+"."+f+"."+l).length===0){this.connection_ele.classList.add("node_in_"+o),this.connection_ele.classList.add("node_out_"+r),this.connection_ele.classList.add(f),this.connection_ele.classList.add(l);var d=o.slice(5),a=r.slice(5);this.drawflow.drawflow[this.module].data[a].outputs[f].connections.push({node:d,output:l}),this.drawflow.drawflow[this.module].data[d].inputs[l].connections.push({node:a,input:f}),this.updateConnectionNodes("node-"+a),this.updateConnectionNodes("node-"+d),this.dispatch("connectionCreated",{output_id:a,input_id:d,output_class:f,input_class:l})}else this.dispatch("connectionCancel",!0),this.connection_ele.remove();this.connection_ele=null}else this.dispatch("connectionCancel",!0),this.connection_ele.remove(),this.connection_ele=null}else this.dispatch("connectionCancel",!0),this.connection_ele.remove(),this.connection_ele=null;this.drag=!1,this.drag_point=!1,this.connection=!1,this.ele_selected=null,this.editor_selected=!1,this.dispatch("mouseUp",e)}contextmenu(e){if(this.dispatch("contextmenu",e),e.preventDefault(),this.editor_mode==="fixed"||this.editor_mode==="view")return!1;if(this.precanvas.getElementsByClassName("drawflow-delete").length&&this.precanvas.getElementsByClassName("drawflow-delete")[0].remove(),this.node_selected||this.connection_selected){var t=document.createElement("div");t.classList.add("drawflow-delete"),t.innerHTML="x",this.node_selected&&this.node_selected.appendChild(t),this.connection_selected&&this.connection_selected.parentElement.classList.length>1&&(t.style.top=e.clientY*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))+"px",t.style.left=e.clientX*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))+"px",this.precanvas.appendChild(t))}}contextmenuDel(){this.precanvas.getElementsByClassName("drawflow-delete").length&&this.precanvas.getElementsByClassName("drawflow-delete")[0].remove()}key(e){if(this.dispatch("keydown",e),this.editor_mode==="fixed"||this.editor_mode==="view")return!1;(e.key==="Delete"||e.key==="Backspace"&&e.metaKey)&&(this.node_selected!=null&&this.first_click.tagName!=="INPUT"&&this.first_click.tagName!=="TEXTAREA"&&this.first_click.hasAttribute("contenteditable")!==!0&&this.removeNodeId(this.node_selected.id),this.connection_selected!=null&&this.removeConnection())}zoom_enter(e,t){e.ctrlKey&&(e.preventDefault(),e.deltaY>0?this.zoom_out():this.zoom_in())}zoom_refresh(){this.dispatch("zoom",this.zoom),this.canvas_x=this.canvas_x/this.zoom_last_value*this.zoom,this.canvas_y=this.canvas_y/this.zoom_last_value*this.zoom,this.zoom_last_value=this.zoom,this.precanvas.style.transform="translate("+this.canvas_x+"px, "+this.canvas_y+"px) scale("+this.zoom+")"}zoom_in(){this.zoom<this.zoom_max&&(this.zoom+=this.zoom_value,this.zoom_refresh())}zoom_out(){this.zoom>this.zoom_min&&(this.zoom-=this.zoom_value,this.zoom_refresh())}zoom_reset(){this.zoom!=1&&(this.zoom=1,this.zoom_refresh())}createCurvature(e,t,n,s,o,l){var r=e,f=t,d=n,a=s,c=o;switch(l){case"open":if(e>=n)var u=r+Math.abs(d-r)*c,m=d-Math.abs(d-r)*(-1*c);else u=r+Math.abs(d-r)*c,m=d-Math.abs(d-r)*c;return" M "+r+" "+f+" C "+u+" "+f+" "+m+" "+a+" "+d+"  "+a;case"close":return e>=n?(u=r+Math.abs(d-r)*(-1*c),m=d-Math.abs(d-r)*c):(u=r+Math.abs(d-r)*c,m=d-Math.abs(d-r)*c)," M "+r+" "+f+" C "+u+" "+f+" "+m+" "+a+" "+d+"  "+a;case"other":return e>=n?(u=r+Math.abs(d-r)*(-1*c),m=d-Math.abs(d-r)*(-1*c)):(u=r+Math.abs(d-r)*c,m=d-Math.abs(d-r)*c)," M "+r+" "+f+" C "+u+" "+f+" "+m+" "+a+" "+d+"  "+a;default:return" M "+r+" "+f+" C "+(u=r+Math.abs(d-r)*c)+" "+f+" "+(m=d-Math.abs(d-r)*c)+" "+a+" "+d+"  "+a}}drawConnection(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");this.connection_ele=t;var n=document.createElementNS("http://www.w3.org/2000/svg","path");n.classList.add("main-path"),n.setAttributeNS(null,"d",""),t.classList.add("connection"),t.appendChild(n),this.precanvas.appendChild(t);var s=e.parentElement.parentElement.id.slice(5),o=e.classList[1];this.dispatch("connectionStart",{output_id:s,output_class:o})}updateConnection(e,t){const n=this.precanvas,s=this.zoom;let o=n.clientWidth/(n.clientWidth*s);o=o||0;let l=n.clientHeight/(n.clientHeight*s);l=l||0;var r=this.connection_ele.children[0],f=this.ele_selected.offsetWidth/2+(this.ele_selected.getBoundingClientRect().x-n.getBoundingClientRect().x)*o,d=this.ele_selected.offsetHeight/2+(this.ele_selected.getBoundingClientRect().y-n.getBoundingClientRect().y)*l,a=e*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom)),c=t*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom)),u=this.curvature,m=this.createCurvature(f,d,a,c,u,"openclose");r.setAttributeNS(null,"d",m)}addConnection(e,t,n,s){var o=this.getModuleFromNodeId(e);if(o===this.getModuleFromNodeId(t)){var l=this.getNodeFromId(e),r=!1;for(var f in l.outputs[n].connections){var d=l.outputs[n].connections[f];d.node==t&&d.output==s&&(r=!0)}if(r===!1){if(this.drawflow.drawflow[o].data[e].outputs[n].connections.push({node:t.toString(),output:s}),this.drawflow.drawflow[o].data[t].inputs[s].connections.push({node:e.toString(),input:n}),this.module===o){var a=document.createElementNS("http://www.w3.org/2000/svg","svg"),c=document.createElementNS("http://www.w3.org/2000/svg","path");c.classList.add("main-path"),c.setAttributeNS(null,"d",""),a.classList.add("connection"),a.classList.add("node_in_node-"+t),a.classList.add("node_out_node-"+e),a.classList.add(n),a.classList.add(s),a.appendChild(c),this.precanvas.appendChild(a),this.updateConnectionNodes("node-"+e),this.updateConnectionNodes("node-"+t)}this.dispatch("connectionCreated",{output_id:e,input_id:t,output_class:n,input_class:s})}}}updateConnectionNodes(e){const t="node_in_"+e,n="node_out_"+e;this.line_path;const s=this.container,o=this.precanvas,l=this.curvature,r=this.createCurvature,f=this.reroute_curvature,d=this.reroute_curvature_start_end,a=this.reroute_fix_curvature,c=this.reroute_width,u=this.zoom;let m=o.clientWidth/(o.clientWidth*u);m=m||0;let _=o.clientHeight/(o.clientHeight*u);_=_||0;const C=s.querySelectorAll("."+n);Object.keys(C).map(function(I,T){if(C[I].querySelector(".point")===null){var V=s.querySelector("#"+e),N=C[I].classList[1].replace("node_in_",""),Y=s.querySelector("#"+N).querySelectorAll("."+C[I].classList[4])[0],ne=Y.offsetWidth/2+(Y.getBoundingClientRect().x-o.getBoundingClientRect().x)*m,te=Y.offsetHeight/2+(Y.getBoundingClientRect().y-o.getBoundingClientRect().y)*_,oe=V.querySelectorAll("."+C[I].classList[3])[0],K=oe.offsetWidth/2+(oe.getBoundingClientRect().x-o.getBoundingClientRect().x)*m,J=oe.offsetHeight/2+(oe.getBoundingClientRect().y-o.getBoundingClientRect().y)*_;const q=r(K,J,ne,te,l,"openclose");C[I].children[0].setAttributeNS(null,"d",q)}else{const q=C[I].querySelectorAll(".point");let k="";const E=[];q.forEach((L,B)=>{if(B===0&&q.length-1==0){var z=s.querySelector("#"+e),A=((O=L).getBoundingClientRect().x-o.getBoundingClientRect().x)*m+c,M=(O.getBoundingClientRect().y-o.getBoundingClientRect().y)*_+c,$=(D=z.querySelectorAll("."+L.parentElement.classList[3])[0]).offsetWidth/2+(D.getBoundingClientRect().x-o.getBoundingClientRect().x)*m,S=D.offsetHeight/2+(D.getBoundingClientRect().y-o.getBoundingClientRect().y)*_,H=r($,S,A,M,d,"open");k+=H,E.push(H),z=L;var Z=L.parentElement.classList[1].replace("node_in_",""),O=(W=s.querySelector("#"+Z)).querySelectorAll("."+L.parentElement.classList[4])[0];A=(se=W.querySelectorAll("."+L.parentElement.classList[4])[0]).offsetWidth/2+(se.getBoundingClientRect().x-o.getBoundingClientRect().x)*m,M=se.offsetHeight/2+(se.getBoundingClientRect().y-o.getBoundingClientRect().y)*_,$=(z.getBoundingClientRect().x-o.getBoundingClientRect().x)*m+c,S=(z.getBoundingClientRect().y-o.getBoundingClientRect().y)*_+c,H=r($,S,A,M,d,"close"),k+=H,E.push(H)}else if(B===0){var D;z=s.querySelector("#"+e),A=((O=L).getBoundingClientRect().x-o.getBoundingClientRect().x)*m+c,M=(O.getBoundingClientRect().y-o.getBoundingClientRect().y)*_+c,$=(D=z.querySelectorAll("."+L.parentElement.classList[3])[0]).offsetWidth/2+(D.getBoundingClientRect().x-o.getBoundingClientRect().x)*m,S=D.offsetHeight/2+(D.getBoundingClientRect().y-o.getBoundingClientRect().y)*_,H=r($,S,A,M,d,"open"),k+=H,E.push(H),z=L,A=((O=q[B+1]).getBoundingClientRect().x-o.getBoundingClientRect().x)*m+c,M=(O.getBoundingClientRect().y-o.getBoundingClientRect().y)*_+c,$=(z.getBoundingClientRect().x-o.getBoundingClientRect().x)*m+c,S=(z.getBoundingClientRect().y-o.getBoundingClientRect().y)*_+c,H=r($,S,A,M,f,"other"),k+=H,E.push(H)}else if(B===q.length-1){var W,se;z=L,Z=L.parentElement.classList[1].replace("node_in_",""),O=(W=s.querySelector("#"+Z)).querySelectorAll("."+L.parentElement.classList[4])[0],A=(se=W.querySelectorAll("."+L.parentElement.classList[4])[0]).offsetWidth/2+(se.getBoundingClientRect().x-o.getBoundingClientRect().x)*m,M=se.offsetHeight/2+(se.getBoundingClientRect().y-o.getBoundingClientRect().y)*_,$=(z.getBoundingClientRect().x-o.getBoundingClientRect().x)*(o.clientWidth/(o.clientWidth*u))+c,S=(z.getBoundingClientRect().y-o.getBoundingClientRect().y)*(o.clientHeight/(o.clientHeight*u))+c,H=r($,S,A,M,d,"close"),k+=H,E.push(H)}else z=L,A=((O=q[B+1]).getBoundingClientRect().x-o.getBoundingClientRect().x)*(o.clientWidth/(o.clientWidth*u))+c,M=(O.getBoundingClientRect().y-o.getBoundingClientRect().y)*(o.clientHeight/(o.clientHeight*u))+c,$=(z.getBoundingClientRect().x-o.getBoundingClientRect().x)*(o.clientWidth/(o.clientWidth*u))+c,S=(z.getBoundingClientRect().y-o.getBoundingClientRect().y)*(o.clientHeight/(o.clientHeight*u))+c,H=r($,S,A,M,f,"other"),k+=H,E.push(H)}),a?E.forEach((L,B)=>{C[I].children[B].setAttributeNS(null,"d",L)}):C[I].children[0].setAttributeNS(null,"d",k)}});const R=s.querySelectorAll("."+t);Object.keys(R).map(function(I,T){if(R[I].querySelector(".point")===null){var V=s.querySelector("#"+e),N=R[I].classList[2].replace("node_out_",""),Y=s.querySelector("#"+N).querySelectorAll("."+R[I].classList[3])[0],ne=Y.offsetWidth/2+(Y.getBoundingClientRect().x-o.getBoundingClientRect().x)*m,te=Y.offsetHeight/2+(Y.getBoundingClientRect().y-o.getBoundingClientRect().y)*_,oe=(V=V.querySelectorAll("."+R[I].classList[4])[0]).offsetWidth/2+(V.getBoundingClientRect().x-o.getBoundingClientRect().x)*m,K=V.offsetHeight/2+(V.getBoundingClientRect().y-o.getBoundingClientRect().y)*_;const J=r(ne,te,oe,K,l,"openclose");R[I].children[0].setAttributeNS(null,"d",J)}else{const J=R[I].querySelectorAll(".point");let q="";const k=[];J.forEach((E,L)=>{if(L===0&&J.length-1==0){var B=s.querySelector("#"+e),z=((Z=E).getBoundingClientRect().x-o.getBoundingClientRect().x)*m+c,A=(Z.getBoundingClientRect().y-o.getBoundingClientRect().y)*_+c,M=(W=B.querySelectorAll("."+E.parentElement.classList[4])[0]).offsetWidth/2+(W.getBoundingClientRect().x-o.getBoundingClientRect().x)*m,$=W.offsetHeight/2+(W.getBoundingClientRect().y-o.getBoundingClientRect().y)*_,S=r(z,A,M,$,d,"close");q+=S,k.push(S),B=E;var H=E.parentElement.classList[2].replace("node_out_",""),Z=(D=s.querySelector("#"+H)).querySelectorAll("."+E.parentElement.classList[3])[0];z=(O=D.querySelectorAll("."+E.parentElement.classList[3])[0]).offsetWidth/2+(O.getBoundingClientRect().x-o.getBoundingClientRect().x)*m,A=O.offsetHeight/2+(O.getBoundingClientRect().y-o.getBoundingClientRect().y)*_,M=(B.getBoundingClientRect().x-o.getBoundingClientRect().x)*m+c,$=(B.getBoundingClientRect().y-o.getBoundingClientRect().y)*_+c,S=r(z,A,M,$,d,"open"),q+=S,k.push(S)}else if(L===0){var O;B=E,H=E.parentElement.classList[2].replace("node_out_",""),Z=(D=s.querySelector("#"+H)).querySelectorAll("."+E.parentElement.classList[3])[0],z=(O=D.querySelectorAll("."+E.parentElement.classList[3])[0]).offsetWidth/2+(O.getBoundingClientRect().x-o.getBoundingClientRect().x)*m,A=O.offsetHeight/2+(O.getBoundingClientRect().y-o.getBoundingClientRect().y)*_,M=(B.getBoundingClientRect().x-o.getBoundingClientRect().x)*m+c,$=(B.getBoundingClientRect().y-o.getBoundingClientRect().y)*_+c,S=r(z,A,M,$,d,"open"),q+=S,k.push(S),B=E,M=((Z=J[L+1]).getBoundingClientRect().x-o.getBoundingClientRect().x)*m+c,$=(Z.getBoundingClientRect().y-o.getBoundingClientRect().y)*_+c,z=(B.getBoundingClientRect().x-o.getBoundingClientRect().x)*m+c,A=(B.getBoundingClientRect().y-o.getBoundingClientRect().y)*_+c,S=r(z,A,M,$,f,"other"),q+=S,k.push(S)}else if(L===J.length-1){var D,W;B=E,H=E.parentElement.classList[1].replace("node_in_",""),Z=(D=s.querySelector("#"+H)).querySelectorAll("."+E.parentElement.classList[4])[0],M=(W=D.querySelectorAll("."+E.parentElement.classList[4])[0]).offsetWidth/2+(W.getBoundingClientRect().x-o.getBoundingClientRect().x)*m,$=W.offsetHeight/2+(W.getBoundingClientRect().y-o.getBoundingClientRect().y)*_,z=(B.getBoundingClientRect().x-o.getBoundingClientRect().x)*m+c,A=(B.getBoundingClientRect().y-o.getBoundingClientRect().y)*_+c,S=r(z,A,M,$,d,"close"),q+=S,k.push(S)}else B=E,M=((Z=J[L+1]).getBoundingClientRect().x-o.getBoundingClientRect().x)*m+c,$=(Z.getBoundingClientRect().y-o.getBoundingClientRect().y)*_+c,z=(B.getBoundingClientRect().x-o.getBoundingClientRect().x)*m+c,A=(B.getBoundingClientRect().y-o.getBoundingClientRect().y)*_+c,S=r(z,A,M,$,f,"other"),q+=S,k.push(S)}),a?k.forEach((E,L)=>{R[I].children[L].setAttributeNS(null,"d",E)}):R[I].children[0].setAttributeNS(null,"d",q)}})}dblclick(e){this.connection_selected!=null&&this.reroute&&this.createReroutePoint(this.connection_selected),e.target.classList[0]==="point"&&this.removeReroutePoint(e.target)}createReroutePoint(e){this.connection_selected.classList.remove("selected");const t=this.connection_selected.parentElement.classList[2].slice(9),n=this.connection_selected.parentElement.classList[1].slice(13),s=this.connection_selected.parentElement.classList[3],o=this.connection_selected.parentElement.classList[4];this.connection_selected=null;const l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.classList.add("point");var r=this.pos_x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom)),f=this.pos_y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom));l.setAttributeNS(null,"cx",r),l.setAttributeNS(null,"cy",f),l.setAttributeNS(null,"r",this.reroute_width);let d=0;if(this.reroute_fix_curvature){const m=e.parentElement.querySelectorAll(".main-path").length;var a=document.createElementNS("http://www.w3.org/2000/svg","path");if(a.classList.add("main-path"),a.setAttributeNS(null,"d",""),e.parentElement.insertBefore(a,e.parentElement.children[m]),m===1)e.parentElement.appendChild(l);else{const _=Array.from(e.parentElement.children).indexOf(e);d=_,e.parentElement.insertBefore(l,e.parentElement.children[_+m+1])}}else e.parentElement.appendChild(l);const c=t.slice(5),u=this.drawflow.drawflow[this.module].data[c].outputs[s].connections.findIndex(function(m,_){return m.node===n&&m.output===o});this.drawflow.drawflow[this.module].data[c].outputs[s].connections[u].points===void 0&&(this.drawflow.drawflow[this.module].data[c].outputs[s].connections[u].points=[]),this.reroute_fix_curvature?(d>0||this.drawflow.drawflow[this.module].data[c].outputs[s].connections[u].points!==[]?this.drawflow.drawflow[this.module].data[c].outputs[s].connections[u].points.splice(d,0,{pos_x:r,pos_y:f}):this.drawflow.drawflow[this.module].data[c].outputs[s].connections[u].points.push({pos_x:r,pos_y:f}),e.parentElement.querySelectorAll(".main-path").forEach((m,_)=>{m.classList.remove("selected")})):this.drawflow.drawflow[this.module].data[c].outputs[s].connections[u].points.push({pos_x:r,pos_y:f}),this.dispatch("addReroute",c),this.updateConnectionNodes(t)}removeReroutePoint(e){const t=e.parentElement.classList[2].slice(9),n=e.parentElement.classList[1].slice(13),s=e.parentElement.classList[3],o=e.parentElement.classList[4];let l=Array.from(e.parentElement.children).indexOf(e);const r=t.slice(5),f=this.drawflow.drawflow[this.module].data[r].outputs[s].connections.findIndex(function(d,a){return d.node===n&&d.output===o});if(this.reroute_fix_curvature){const d=e.parentElement.querySelectorAll(".main-path").length;e.parentElement.children[d-1].remove(),l-=d,l<0&&(l=0)}else l--;this.drawflow.drawflow[this.module].data[r].outputs[s].connections[f].points.splice(l,1),e.remove(),this.dispatch("removeReroute",r),this.updateConnectionNodes(t)}registerNode(e,t,n=null,s=null){this.noderegister[e]={html:t,props:n,options:s}}getNodeFromId(e){var t=this.getModuleFromNodeId(e);return JSON.parse(JSON.stringify(this.drawflow.drawflow[t].data[e]))}getNodesFromName(e){var t=[];const n=this.drawflow.drawflow;return Object.keys(n).map(function(s,o){for(var l in n[s].data)n[s].data[l].name==e&&t.push(n[s].data[l].id)}),t}addNode(e,t,n,s,o,l,r,f,d=!1){if(this.useuuid)var a=this.getUuid();else a=this.nodeId;const c=document.createElement("div");c.classList.add("parent-node");const u=document.createElement("div");u.innerHTML="",u.setAttribute("id","node-"+a),u.classList.add("drawflow-node"),l!=""&&u.classList.add(...l.split(" "));const m=document.createElement("div");m.classList.add("inputs");const _=document.createElement("div");_.classList.add("outputs");const C={};for(var R=0;R<t;R++){const N=document.createElement("div");N.classList.add("input"),N.classList.add("input_"+(R+1)),C["input_"+(R+1)]={connections:[]},m.appendChild(N)}const I={};for(R=0;R<n;R++){const N=document.createElement("div");N.classList.add("output"),N.classList.add("output_"+(R+1)),I["output_"+(R+1)]={connections:[]},_.appendChild(N)}const T=document.createElement("div");if(T.classList.add("drawflow_content_node"),d===!1)T.innerHTML=f;else if(d===!0)T.appendChild(this.noderegister[f].html.cloneNode(!0));else if(parseInt(this.render.version)===3){let N=this.render.h(this.noderegister[f].html,this.noderegister[f].props,this.noderegister[f].options);N.appContext=this.parent,this.render.render(N,T)}else{let N=new this.render({parent:this.parent,render:Y=>Y(this.noderegister[f].html,{props:this.noderegister[f].props}),...this.noderegister[f].options}).$mount();T.appendChild(N.$el)}Object.entries(r).forEach(function(N,Y){if(typeof N[1]=="object")(function oe(K,J,q){K===null?K=r[J]:K=K[J],K!==null&&Object.entries(K).forEach(function(k,E){if(typeof k[1]=="object")oe(K,k[0],q+"-"+k[0]);else for(var L=T.querySelectorAll("[df-"+q+"-"+k[0]+"]"),B=0;B<L.length;B++)L[B].value=k[1],L[B].isContentEditable&&(L[B].innerText=k[1])})})(null,N[0],N[0]);else for(var ne=T.querySelectorAll("[df-"+N[0]+"]"),te=0;te<ne.length;te++)ne[te].value=N[1],ne[te].isContentEditable&&(ne[te].innerText=N[1])}),u.appendChild(m),u.appendChild(T),u.appendChild(_),u.style.top=o+"px",u.style.left=s+"px",c.appendChild(u),this.precanvas.appendChild(c);var V={id:a,name:e,data:r,class:l,html:f,typenode:d,inputs:C,outputs:I,pos_x:s,pos_y:o};return this.drawflow.drawflow[this.module].data[a]=V,this.dispatch("nodeCreated",a),this.useuuid||this.nodeId++,a}addNodeImport(e,t){const n=document.createElement("div");n.classList.add("parent-node");const s=document.createElement("div");s.innerHTML="",s.setAttribute("id","node-"+e.id),s.classList.add("drawflow-node"),e.class!=""&&s.classList.add(...e.class.split(" "));const o=document.createElement("div");o.classList.add("inputs");const l=document.createElement("div");l.classList.add("outputs"),Object.keys(e.inputs).map(function(d,a){const c=document.createElement("div");c.classList.add("input"),c.classList.add(d),o.appendChild(c),Object.keys(e.inputs[d].connections).map(function(u,m){var _=document.createElementNS("http://www.w3.org/2000/svg","svg"),C=document.createElementNS("http://www.w3.org/2000/svg","path");C.classList.add("main-path"),C.setAttributeNS(null,"d",""),_.classList.add("connection"),_.classList.add("node_in_node-"+e.id),_.classList.add("node_out_node-"+e.inputs[d].connections[u].node),_.classList.add(e.inputs[d].connections[u].input),_.classList.add(d),_.appendChild(C),t.appendChild(_)})});for(var r=0;r<Object.keys(e.outputs).length;r++){const d=document.createElement("div");d.classList.add("output"),d.classList.add("output_"+(r+1)),l.appendChild(d)}const f=document.createElement("div");if(f.classList.add("drawflow_content_node"),e.typenode===!1)f.innerHTML=e.html;else if(e.typenode===!0)f.appendChild(this.noderegister[e.html].html.cloneNode(!0));else if(parseInt(this.render.version)===3){let d=this.render.h(this.noderegister[e.html].html,this.noderegister[e.html].props,this.noderegister[e.html].options);d.appContext=this.parent,this.render.render(d,f)}else{let d=new this.render({parent:this.parent,render:a=>a(this.noderegister[e.html].html,{props:this.noderegister[e.html].props}),...this.noderegister[e.html].options}).$mount();f.appendChild(d.$el)}Object.entries(e.data).forEach(function(d,a){if(typeof d[1]=="object")(function m(_,C,R){_===null?_=e.data[C]:_=_[C],_!==null&&Object.entries(_).forEach(function(I,T){if(typeof I[1]=="object")m(_,I[0],R+"-"+I[0]);else for(var V=f.querySelectorAll("[df-"+R+"-"+I[0]+"]"),N=0;N<V.length;N++)V[N].value=I[1],V[N].isContentEditable&&(V[N].innerText=I[1])})})(null,d[0],d[0]);else for(var c=f.querySelectorAll("[df-"+d[0]+"]"),u=0;u<c.length;u++)c[u].value=d[1],c[u].isContentEditable&&(c[u].innerText=d[1])}),s.appendChild(o),s.appendChild(f),s.appendChild(l),s.style.top=e.pos_y+"px",s.style.left=e.pos_x+"px",n.appendChild(s),this.precanvas.appendChild(n)}addRerouteImport(e){const t=this.reroute_width,n=this.reroute_fix_curvature,s=this.container;Object.keys(e.outputs).map(function(o,l){Object.keys(e.outputs[o].connections).map(function(r,f){const d=e.outputs[o].connections[r].points;d!==void 0&&d.forEach((a,c)=>{const u=e.outputs[o].connections[r].node,m=e.outputs[o].connections[r].output,_=s.querySelector(".connection.node_in_node-"+u+".node_out_node-"+e.id+"."+o+"."+m);if(n&&c===0)for(var C=0;C<d.length;C++){var R=document.createElementNS("http://www.w3.org/2000/svg","path");R.classList.add("main-path"),R.setAttributeNS(null,"d",""),_.appendChild(R)}const I=document.createElementNS("http://www.w3.org/2000/svg","circle");I.classList.add("point");var T=a.pos_x,V=a.pos_y;I.setAttributeNS(null,"cx",T),I.setAttributeNS(null,"cy",V),I.setAttributeNS(null,"r",t),_.appendChild(I)})})})}updateNodeValue(e){for(var t=e.target.attributes,n=0;n<t.length;n++)if(t[n].nodeName.startsWith("df-")){for(var s=t[n].nodeName.slice(3).split("-"),o=this.drawflow.drawflow[this.module].data[e.target.closest(".drawflow_content_node").parentElement.id.slice(5)].data,l=0;l<s.length-1;l+=1)o[s[l]]==null&&(o[s[l]]={}),o=o[s[l]];o[s[s.length-1]]=e.target.value,e.target.isContentEditable&&(o[s[s.length-1]]=e.target.innerText),this.dispatch("nodeDataChanged",e.target.closest(".drawflow_content_node").parentElement.id.slice(5))}}updateNodeDataFromId(e,t){var n=this.getModuleFromNodeId(e);if(this.drawflow.drawflow[n].data[e].data=t,this.module===n){const s=this.container.querySelector("#node-"+e);Object.entries(t).forEach(function(o,l){if(typeof o[1]=="object")(function d(a,c,u){a===null?a=t[c]:a=a[c],a!==null&&Object.entries(a).forEach(function(m,_){if(typeof m[1]=="object")d(a,m[0],u+"-"+m[0]);else for(var C=s.querySelectorAll("[df-"+u+"-"+m[0]+"]"),R=0;R<C.length;R++)C[R].value=m[1],C[R].isContentEditable&&(C[R].innerText=m[1])})})(null,o[0],o[0]);else for(var r=s.querySelectorAll("[df-"+o[0]+"]"),f=0;f<r.length;f++)r[f].value=o[1],r[f].isContentEditable&&(r[f].innerText=o[1])})}}addNodeInput(e){var t=this.getModuleFromNodeId(e);const n=this.getNodeFromId(e),s=Object.keys(n.inputs).length;if(this.module===t){const o=document.createElement("div");o.classList.add("input"),o.classList.add("input_"+(s+1)),this.container.querySelector("#node-"+e+" .inputs").appendChild(o),this.updateConnectionNodes("node-"+e)}this.drawflow.drawflow[t].data[e].inputs["input_"+(s+1)]={connections:[]}}addNodeOutput(e){var t=this.getModuleFromNodeId(e);const n=this.getNodeFromId(e),s=Object.keys(n.outputs).length;if(this.module===t){const o=document.createElement("div");o.classList.add("output"),o.classList.add("output_"+(s+1)),this.container.querySelector("#node-"+e+" .outputs").appendChild(o),this.updateConnectionNodes("node-"+e)}this.drawflow.drawflow[t].data[e].outputs["output_"+(s+1)]={connections:[]}}removeNodeInput(e,t){var n=this.getModuleFromNodeId(e);const s=this.getNodeFromId(e);this.module===n&&this.container.querySelector("#node-"+e+" .inputs .input."+t).remove();const o=[];Object.keys(s.inputs[t].connections).map(function(a,c){const u=s.inputs[t].connections[c].node,m=s.inputs[t].connections[c].input;o.push({id_output:u,id:e,output_class:m,input_class:t})}),o.forEach((a,c)=>{this.removeSingleConnection(a.id_output,a.id,a.output_class,a.input_class)}),delete this.drawflow.drawflow[n].data[e].inputs[t];const l=[],r=this.drawflow.drawflow[n].data[e].inputs;Object.keys(r).map(function(a,c){l.push(r[a])}),this.drawflow.drawflow[n].data[e].inputs={};const f=t.slice(6);let d=[];l.forEach((a,c)=>{a.connections.forEach((u,m)=>{d.push(u)}),this.drawflow.drawflow[n].data[e].inputs["input_"+(c+1)]=a}),d=new Set(d.map(a=>JSON.stringify(a))),d=Array.from(d).map(a=>JSON.parse(a)),this.module===n&&this.container.querySelectorAll("#node-"+e+" .inputs .input").forEach((a,c)=>{const u=a.classList[1].slice(6);parseInt(f)<parseInt(u)&&(a.classList.remove("input_"+u),a.classList.add("input_"+(u-1)))}),d.forEach((a,c)=>{this.drawflow.drawflow[n].data[a.node].outputs[a.input].connections.forEach((u,m)=>{if(u.node==e){const _=u.output.slice(6);if(parseInt(f)<parseInt(_)){if(this.module===n){const C=this.container.querySelector(".connection.node_in_node-"+e+".node_out_node-"+a.node+"."+a.input+".input_"+_);C.classList.remove("input_"+_),C.classList.add("input_"+(_-1))}u.points?this.drawflow.drawflow[n].data[a.node].outputs[a.input].connections[m]={node:u.node,output:"input_"+(_-1),points:u.points}:this.drawflow.drawflow[n].data[a.node].outputs[a.input].connections[m]={node:u.node,output:"input_"+(_-1)}}}})}),this.updateConnectionNodes("node-"+e)}removeNodeOutput(e,t){var n=this.getModuleFromNodeId(e);const s=this.getNodeFromId(e);this.module===n&&this.container.querySelector("#node-"+e+" .outputs .output."+t).remove();const o=[];Object.keys(s.outputs[t].connections).map(function(a,c){const u=s.outputs[t].connections[c].node,m=s.outputs[t].connections[c].output;o.push({id:e,id_input:u,output_class:t,input_class:m})}),o.forEach((a,c)=>{this.removeSingleConnection(a.id,a.id_input,a.output_class,a.input_class)}),delete this.drawflow.drawflow[n].data[e].outputs[t];const l=[],r=this.drawflow.drawflow[n].data[e].outputs;Object.keys(r).map(function(a,c){l.push(r[a])}),this.drawflow.drawflow[n].data[e].outputs={};const f=t.slice(7);let d=[];l.forEach((a,c)=>{a.connections.forEach((u,m)=>{d.push({node:u.node,output:u.output})}),this.drawflow.drawflow[n].data[e].outputs["output_"+(c+1)]=a}),d=new Set(d.map(a=>JSON.stringify(a))),d=Array.from(d).map(a=>JSON.parse(a)),this.module===n&&this.container.querySelectorAll("#node-"+e+" .outputs .output").forEach((a,c)=>{const u=a.classList[1].slice(7);parseInt(f)<parseInt(u)&&(a.classList.remove("output_"+u),a.classList.add("output_"+(u-1)))}),d.forEach((a,c)=>{this.drawflow.drawflow[n].data[a.node].inputs[a.output].connections.forEach((u,m)=>{if(u.node==e){const _=u.input.slice(7);if(parseInt(f)<parseInt(_)){if(this.module===n){const C=this.container.querySelector(".connection.node_in_node-"+a.node+".node_out_node-"+e+".output_"+_+"."+a.output);C.classList.remove("output_"+_),C.classList.remove(a.output),C.classList.add("output_"+(_-1)),C.classList.add(a.output)}u.points?this.drawflow.drawflow[n].data[a.node].inputs[a.output].connections[m]={node:u.node,input:"output_"+(_-1),points:u.points}:this.drawflow.drawflow[n].data[a.node].inputs[a.output].connections[m]={node:u.node,input:"output_"+(_-1)}}}})}),this.updateConnectionNodes("node-"+e)}removeNodeId(e){this.removeConnectionNodeId(e);var t=this.getModuleFromNodeId(e.slice(5));this.module===t&&this.container.querySelector("#"+e).remove(),delete this.drawflow.drawflow[t].data[e.slice(5)],this.dispatch("nodeRemoved",e.slice(5))}removeConnection(){if(this.connection_selected!=null){var e=this.connection_selected.parentElement.classList;this.connection_selected.parentElement.remove();var t=this.drawflow.drawflow[this.module].data[e[2].slice(14)].outputs[e[3]].connections.findIndex(function(s,o){return s.node===e[1].slice(13)&&s.output===e[4]});this.drawflow.drawflow[this.module].data[e[2].slice(14)].outputs[e[3]].connections.splice(t,1);var n=this.drawflow.drawflow[this.module].data[e[1].slice(13)].inputs[e[4]].connections.findIndex(function(s,o){return s.node===e[2].slice(14)&&s.input===e[3]});this.drawflow.drawflow[this.module].data[e[1].slice(13)].inputs[e[4]].connections.splice(n,1),this.dispatch("connectionRemoved",{output_id:e[2].slice(14),input_id:e[1].slice(13),output_class:e[3],input_class:e[4]}),this.connection_selected=null}}removeSingleConnection(e,t,n,s){var o=this.getModuleFromNodeId(e);if(o===this.getModuleFromNodeId(t)){if(this.drawflow.drawflow[o].data[e].outputs[n].connections.findIndex(function(f,d){return f.node==t&&f.output===s})>-1){this.module===o&&this.container.querySelector(".connection.node_in_node-"+t+".node_out_node-"+e+"."+n+"."+s).remove();var l=this.drawflow.drawflow[o].data[e].outputs[n].connections.findIndex(function(f,d){return f.node==t&&f.output===s});this.drawflow.drawflow[o].data[e].outputs[n].connections.splice(l,1);var r=this.drawflow.drawflow[o].data[t].inputs[s].connections.findIndex(function(f,d){return f.node==e&&f.input===n});return this.drawflow.drawflow[o].data[t].inputs[s].connections.splice(r,1),this.dispatch("connectionRemoved",{output_id:e,input_id:t,output_class:n,input_class:s}),!0}return!1}return!1}removeConnectionNodeId(e){const t="node_in_"+e,n="node_out_"+e,s=this.container.querySelectorAll("."+n);for(var o=s.length-1;o>=0;o--){var l=s[o].classList,r=this.drawflow.drawflow[this.module].data[l[1].slice(13)].inputs[l[4]].connections.findIndex(function(a,c){return a.node===l[2].slice(14)&&a.input===l[3]});this.drawflow.drawflow[this.module].data[l[1].slice(13)].inputs[l[4]].connections.splice(r,1);var f=this.drawflow.drawflow[this.module].data[l[2].slice(14)].outputs[l[3]].connections.findIndex(function(a,c){return a.node===l[1].slice(13)&&a.output===l[4]});this.drawflow.drawflow[this.module].data[l[2].slice(14)].outputs[l[3]].connections.splice(f,1),s[o].remove(),this.dispatch("connectionRemoved",{output_id:l[2].slice(14),input_id:l[1].slice(13),output_class:l[3],input_class:l[4]})}const d=this.container.querySelectorAll("."+t);for(o=d.length-1;o>=0;o--)l=d[o].classList,f=this.drawflow.drawflow[this.module].data[l[2].slice(14)].outputs[l[3]].connections.findIndex(function(a,c){return a.node===l[1].slice(13)&&a.output===l[4]}),this.drawflow.drawflow[this.module].data[l[2].slice(14)].outputs[l[3]].connections.splice(f,1),r=this.drawflow.drawflow[this.module].data[l[1].slice(13)].inputs[l[4]].connections.findIndex(function(a,c){return a.node===l[2].slice(14)&&a.input===l[3]}),this.drawflow.drawflow[this.module].data[l[1].slice(13)].inputs[l[4]].connections.splice(r,1),d[o].remove(),this.dispatch("connectionRemoved",{output_id:l[2].slice(14),input_id:l[1].slice(13),output_class:l[3],input_class:l[4]})}getModuleFromNodeId(e){var t;const n=this.drawflow.drawflow;return Object.keys(n).map(function(s,o){Object.keys(n[s].data).map(function(l,r){l==e&&(t=s)})}),t}addModule(e){this.drawflow.drawflow[e]={data:{}},this.dispatch("moduleCreated",e)}changeModule(e){this.dispatch("moduleChanged",e),this.module=e,this.precanvas.innerHTML="",this.canvas_x=0,this.canvas_y=0,this.pos_x=0,this.pos_y=0,this.mouse_x=0,this.mouse_y=0,this.zoom=1,this.zoom_last_value=1,this.precanvas.style.transform="",this.import(this.drawflow,!1)}removeModule(e){this.module===e&&this.changeModule("Home"),delete this.drawflow.drawflow[e],this.dispatch("moduleRemoved",e)}clearModuleSelected(){this.precanvas.innerHTML="",this.drawflow.drawflow[this.module]={data:{}}}clear(){this.precanvas.innerHTML="",this.drawflow={drawflow:{Home:{data:{}}}}}export(){const e=JSON.parse(JSON.stringify(this.drawflow));return this.dispatch("export",e),e}import(e,t=!0){this.clear(),this.drawflow=JSON.parse(JSON.stringify(e)),this.load(),t&&this.dispatch("import","import")}on(e,t){return typeof t!="function"?(console.error("The listener callback must be a function, the given type is "+typeof t),!1):typeof e!="string"?(console.error("The event name must be a string, the given type is "+typeof e),!1):(this.events[e]===void 0&&(this.events[e]={listeners:[]}),void this.events[e].listeners.push(t))}removeListener(e,t){if(!this.events[e])return!1;const n=this.events[e].listeners,s=n.indexOf(t);s>-1&&n.splice(s,1)}dispatch(e,t){if(this.events[e]===void 0)return!1;this.events[e].listeners.forEach(n=>{n(t)})}getUuid(){for(var e=[],t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}}}]).default})})(Le);const Nt=Bt(Le.exports),Re={LogicOperation:!0,Cicle:!0},Se={Variable:!0,Assign:!0},ge=U(),ye=b=>b.nodeRefInput1&&b.nodeRefInput2,_e=(b,p)=>{const i=ge.getNode(b),y=ge.getNode(p);return{nodeRef1:i,nodeRef2:y}},ve=(b,p)=>{let i="";for(const y of b){const v=ge.getNode(y);v.type!=="MathOperation"&&(i+="	"+Ee(p)+v.pythonCode+`
`)}return i},Ee=b=>b?"	":"",Lt={__name:"DrawFlowControll",setup(b){const p=ae(ie),i=U();p.on("nodeRemoved",function(n){i.removeNodeProgram(n)}),p.on("connectionCreated",function(n){const{type:s}=i.getNode(n.output_id);if(Re[s]){v(n);return}y(n)});const y=n=>{const s=i.getNode(n.input_id);if(n.input_class=="input_1"){s.nodeRefInput1=n.output_id;return}s.nodeRefInput2=n.output_id},v=n=>{const{nodeRef1:s,nodeRef2:o}=_e(n.output_id,n.input_id);o.parentNode=n.output_id,w(s,n)},w=(n,s)=>{if(n.type=="Cicle"){n.cicle.push(s.input_id);return}if(s.output_class=="output_1"){n.trueCondition.push(s.input_id);return}n.falseCondition.push(s.input_id)};p.on("connectionRemoved",function(n){const{type:s}=i.getNode(n.output_id);if(Re[s]){e(n);return}h(n)});const h=n=>{const s=i.getNode(n.input_id);if(n.input_class=="input_1"){s.nodeRefInput1=null;return}s.nodeRefInput2=null},e=n=>{const{nodeRef1:s,nodeRef2:o}=_e(n.output_id,n.input_id);o.parentNode=null,t(s,n)},t=(n,s)=>{if(n.type==="Cicle"){n.cicle=n.cicle.filter(o=>o!==s.input_id);return}if(s.output_class=="output_1"){n.trueCondition=n.trueCondition.filter(o=>o!==s.input_id);return}n.falseCondition=n.falseCondition.filter(o=>o!==s.input_id)};return(n,s)=>null}};const St={class:"flex justify-center items-center text-center py-1 bg-blue-100 border-b border-blue-900 rounded-t-xl"},Et={class:"title-color font-semibold ml-2"},zt={class:"p-2 flex flex-col"},he={__name:"BoxNode",props:{title:String},emits:["onNodeId"],setup(b,{emit:p}){const i=pe(null),y=pe(0);return Ne(async()=>{await ke(),y.value=i.value.parentElement.parentElement.id.slice(5),p("onNodeId",y.value)}),(v,w)=>(j(),ee("div",{class:"flex-col justify-center w-full",ref_key:"element",ref:i},[g("div",St,[be(v.$slots,"icon"),g("h1",Et,le(b.title),1)]),g("div",zt,[be(v.$slots,"content")])],512))}},At=g("label",{for:"Identify",class:"text-blue-900 ml-2 font-medium"}," Identify ",-1),Mt=g("label",{for:"Value",class:"text-blue-900 ml-2 pt-2 font-medium"},"Value",-1),$t={__name:"BoxVariable",setup(b){const p=U(),i=re({type:"Variable",nodeId:"",identifier:"",value:0,parentNode:null,pythonCode:null}),y=ae(ie);p.addNodeProgram(i);const v=h=>{i.nodeId=h;const e=y.getNodeFromId(h);e.data.type&&(i.identifier=e.data.identifier,i.value=e.data.value,i.parentNode=e.data.parentNode,i.pythonCode=e.data.pythonCode)};ce(i,h=>{w(h)});const w=h=>{h.identifier?h.pythonCode=`${h.identifier} = ${h.value}`:h.pythonCode=null};return(h,e)=>(j(),ue(he,{title:"Variable",onOnNodeId:e[2]||(e[2]=t=>v(t))},{icon:X(()=>[x(P(De),{class:"title-color font-semibold text-lg"})]),content:X(()=>[At,fe(g("input",{type:"text",id:"Identify",name:"Identify",class:"border-2 border-blue-200 rounded-lg px-2 py-1 text-sm text-blue-900 focus:border-blue-400 focus:outline-none",placeholder:"Identify to Variable","onUpdate:modelValue":e[0]||(e[0]=t=>i.identifier=t)},null,512),[[me,i.identifier]]),Mt,fe(g("input",{type:"number",id:"Value",name:"Value",class:"border-2 border-blue-200 rounded-lg px-2 py-1 text-sm text-blue-900 focus:border-blue-400 focus:outline-none",placeholder:"Numerical Value","onUpdate:modelValue":e[1]||(e[1]=t=>i.value=t)},null,512),[[me,i.value]])]),_:1}))}},Ht=g("label",{for:"Identify",class:"text-blue-900 ml-2 font-medium"},"Identify",-1),kt=g("label",{for:"Value",class:"text-blue-900 ml-2 font-medium pt-2"},"Value",-1),qt={__name:"BoxAssign",setup(b){const p=U(),i=re({type:"Assign",nodeId:"",identifier:"",nodeRefInput1:null,value:null,parentNode:null,pythonCode:null}),y=ae(ie);p.addNodeProgram(i);const v=t=>{i.nodeId=t;const n=y.getNodeFromId(t);n.data.type&&(i.identifier=n.data.identifier,i.nodeRefInput1=n.data.nodeRefInput1,i.value=n.data.value,i.parentNode=n.data.parentNode,i.pythonCode=n.data.pythonCode)};ce(i,t=>{w(t.nodeRefInput1),h(t)});const w=t=>{const n=p.getNode(t);n?i.value=n.value:i.value=null},h=t=>{const n=p.getNode(t.nodeRefInput1);if(n){t.pythonCode=e(t,n);return}t.pythonCode=null},e=(t,n)=>Se[n.type]?`${t.identifier} = ${n.identifier}`:`${t.identifier} = ${n.pythonCode}`;return(t,n)=>(j(),ue(he,{title:"Assign",onOnNodeId:n[2]||(n[2]=s=>v(s))},{icon:X(()=>[x(P(je),{class:"title-color font-semibold text-lg"})]),content:X(()=>[Ht,fe(g("input",{type:"text",id:"Identify",name:"Identify",class:"border-2 border-blue-200 rounded-lg px-2 py-1 text-sm text-blue-900 focus:border-blue-400 focus:outline-none",placeholder:"Identify to Assign","onUpdate:modelValue":n[0]||(n[0]=s=>i.identifier=s)},null,512),[[me,i.identifier]]),kt,fe(g("input",{type:"number",id:"Value",name:"Value",class:"border-2 border-blue-200 rounded-lg px-2 py-1 text-sm text-blue-900 focus:border-blue-400 focus:outline-none","onUpdate:modelValue":n[1]||(n[1]=s=>i.value=s),disabled:""},null,512),[[me,i.value]])]),_:1}))}},Ot={class:"text-center"},Pt=g("h1",{class:"title-color font-semibold"},"Value 1",-1),Vt={class:"flex justify-between text-2xl my-3 text-blue-900"},jt=g("h1",{class:"title-color font-semibold"},"Value 2",-1),Dt={__name:"BoxMath",setup(b){const p=U(),i=re({type:"MathOperation",nodeId:"",operation:"+",nodeRefInput1:null,nodeRefInput2:null,value:null,parentNode:null,pythonCode:null}),y=ae(ie);p.addNodeProgram(i);const v=h=>{i.nodeId=h;const e=y.getNodeFromId(h);e.data.type&&(i.operation=e.data.operation,i.nodeRefInput1=e.data.nodeRefInput1,i.nodeRefInput2=e.data.nodeRefInput2,i.value=e.data.value,i.parentNode=e.data.parentNode,i.pythonCode=e.data.pythonCode)};ce(i,h=>{if(ye(h))return w(h);h.pythonCode=null,h.value=null});const w=h=>{const{nodeRef1:e,nodeRef2:t}=_e(h.nodeRefInput1,h.nodeRefInput2);switch(h.pythonCode=`${e.identifier} ${h.operation} ${t.identifier}`,h.operation){case"+":h.value=e.value+t.value;break;case"-":h.value=e.value-t.value;break;case"*":h.value=e.value*t.value;break;case"/":h.value=e.value/t.value;break;case"%":h.value=e.value%t.value;break;default:h.value=null;break}};return(h,e)=>(j(),ue(he,{title:"Math Operation",onOnNodeId:e[5]||(e[5]=t=>v(t))},{icon:X(()=>[x(P(Te),{class:"title-color font-semibold text-lg"})]),content:X(()=>[g("div",Ot,[Pt,g("div",Vt,[g("span",{class:Q(["hover:bg-blue-400 hover:text-white p-1 rounded-lg",i.operation=="+"?"bg-blue-900 text-white":""]),onClick:e[0]||(e[0]=t=>i.operation="+")},[x(P(Ue))],2),g("span",{class:Q(["hover:bg-blue-400 hover:text-white p-1 rounded-lg",i.operation=="-"?"bg-blue-900 text-white":""]),onClick:e[1]||(e[1]=t=>i.operation="-")},[x(P(We))],2),g("span",{class:Q(["hover:bg-blue-400 hover:text-white p-1 rounded-lg",i.operation=="*"?"bg-blue-900 text-white":""]),onClick:e[2]||(e[2]=t=>i.operation="*")},[x(P(Ge))],2),g("span",{class:Q(["hover:bg-blue-400 hover:text-white p-1 rounded-lg",i.operation=="/"?"bg-blue-900 text-white":""]),onClick:e[3]||(e[3]=t=>i.operation="/")},[x(P(Ze))],2),g("span",{class:Q(["hover:bg-blue-400 hover:text-white p-1 rounded-lg",i.operation=="%"?"bg-blue-900 text-white":""]),onClick:e[4]||(e[4]=t=>i.operation="%")},[x(P(Xe))],2)]),jt])]),_:1}))}},Tt={class:"text-center"},Wt=g("div",{class:"flex justify-between pl-6"},[g("h1",{class:"title-color font-semibold"},"Value 1"),g("h1",{class:"title-color font-semibold"},"True")],-1),Ft={class:"flex justify-between items-center px-1 my-3 mr-8 text-2xl text-blue-900"},Xt=g("div",{class:"flex justify-between pl-6"},[g("h1",{class:"title-color font-semibold"},"Value 2"),g("h1",{class:"title-color font-semibold"},"False")],-1),Ut={__name:"BoxLogic",setup(b){const p=U(),i=re({type:"LogicOperation",nodeId:"",operation:"==",nodeRefInput1:null,nodeRefInput2:null,trueCondition:[],falseCondition:[],parentNode:null,pythonCode:null}),y=ae(ie);p.addNodeProgram(i);const v=e=>{i.nodeId=e;const t=y.getNodeFromId(e);t.data.type&&(i.operation=t.data.operation,i.nodeRefInput1=t.data.nodeRefInput1,i.nodeRefInput2=t.data.nodeRefInput2,i.trueCondition=t.data.trueCondition,i.falseCondition=t.data.falseCondition,i.parentNode=t.data.parentNode,i.pythonCode=t.data.pythonCode)};ce(i,e=>{w(e)});const w=e=>{if(ye(e)){e.pythonCode=h(e);return}e.pythonCode=null},h=e=>{const{nodeRef1:t,nodeRef2:n}=_e(e.nodeRefInput1,e.nodeRefInput2);return"if "+t.identifier+" "+e.operation+" "+n.identifier+`:
`+ve(e.trueCondition,e.parentNode)+`
`+Ee(e.parentNode)+`else:
`+ve(e.falseCondition,e.parentNode)};return(e,t)=>(j(),ue(he,{title:"Logic Operation",onOnNodeId:t[4]||(t[4]=n=>v(n))},{icon:X(()=>[x(P(Je),{class:"title-color font-bold text-lg"})]),content:X(()=>[g("div",Tt,[Wt,g("div",Ft,[g("span",{value:"Add",class:Q(["hover:bg-blue-400 hover:text-white rounded-lg w-8 h-8 font-bold border-2 border-blue-900",i.operation=="<"?"bg-blue-900 text-white":""]),onClick:t[0]||(t[0]=n=>i.operation="<")}," < ",2),g("span",{value:"Subtract",class:Q(["hover:bg-blue-400 hover:text-white rounded-lg w-8 h-8 after:first:font-bold border-2 border-blue-900",i.operation==">"?"bg-blue-900 text-white":""]),onClick:t[1]||(t[1]=n=>i.operation=">")}," > ",2),g("span",{value:"Multiply",class:Q(["hover:bg-blue-400 hover:text-white rounded-lg w-8 h-8 font-bold border-2 border-blue-900",i.operation=="!="?"bg-blue-900 text-white":""]),onClick:t[2]||(t[2]=n=>i.operation="!=")}," != ",2),g("span",{value:"Divide",class:Q(["hover:bg-blue-400 hover:text-white rounded-lg w-8 h-8 font-bold border-2 border-blue-900",i.operation=="=="?"bg-blue-900 text-white":""]),onClick:t[3]||(t[3]=n=>i.operation="==")}," = ",2)]),Xt])]),_:1}))}},Yt={class:"flex flex-col items-center"},Jt=g("h1",{class:"title-color font-semibold"},"From",-1),Zt=g("h1",{class:"title-color font-semibold"},"To",-1),Gt={__name:"BoxCicle",setup(b){const p=U(),i=re({type:"Cicle",nodeId:"",nodeRefInput1:null,nodeRefInput2:null,cicle:[],parentNode:null,pythonCode:null}),y=ae(ie);p.addNodeProgram(i);const v=e=>{i.nodeId=e;const t=y.getNodeFromId(e);t.data.type&&(i.nodeRefInput1=t.data.nodeRefInput1,i.nodeRefInput2=t.data.nodeRefInput2,i.cicle=t.data.cicle,i.parentNode=t.data.parentNode,i.pythonCode=t.data.pythonCode)};ce(i,e=>{w(e)});const w=e=>{if(ye(e)){e.pythonCode=h(e);return}e.pythonCode=null},h=e=>{const{nodeRef1:t,nodeRef2:n}=_e(e.nodeRefInput1,e.nodeRefInput2);return"for i in range( "+t.identifier+", "+n.identifier+` + 1 ):
`+ve(e.cicle,e.parentNode)};return(e,t)=>(j(),ue(he,{title:"Cicle",onOnNodeId:t[0]||(t[0]=n=>v(n))},{icon:X(()=>[x(P(Ce),{class:"title-color font-semibold text-lg"})]),content:X(()=>[g("div",Yt,[Jt,x(P(Ce),{class:"title-color font-bold text-2xl my-1"}),Zt])]),_:1}))}},Kt={class:"flex flex-col items-center"},Qt=g("label",{for:"Identify",class:"text-blue-900 ml-2 font-medium"},"Message",-1),en=g("h1",{class:"title-color font-semibold mt-2"},"Value to Print",-1),tn={class:"title-color font-semibold mt-2"},nn={__name:"BoxPrint",setup(b){const p=U(),i=re({type:"Print",nodeId:"",message:"",nodeRefInput1:null,value:null,parentNode:null,pythonCode:null}),y=ae(ie);p.addNodeProgram(i);const v=t=>{i.nodeId=t;const n=y.getNodeFromId(t);n.data.type&&(i.message=n.data.message,i.nodeRefInput1=n.data.nodeRefInput1,i.value=n.data.value,i.parentNode=n.data.parentNode,i.pythonCode=n.data.pythonCode)};ce(i,t=>{w(t.nodeRefInput1),h(t)});const w=t=>{const n=p.getNode(t);n?i.value=n.value:i.value=null},h=t=>{const n=p.getNode(t.nodeRefInput1);if(n){t.pythonCode=e(t,n);return}t.pythonCode=`print("${t.message}")`},e=(t,n)=>Se[n.type]?`print("${t.message}" , ${n.identifier})`:`print("${t.message}" , ${n.pythonCode})`;return(t,n)=>(j(),ue(he,{title:"Print",onOnNodeId:n[1]||(n[1]=s=>v(s))},{icon:X(()=>[x(P(Ye),{class:"title-color font-semibold text-lg"})]),content:X(()=>[g("div",Kt,[Qt,fe(g("input",{type:"text",id:"Identify",name:"Identify",class:"border-2 border-blue-200 rounded-lg px-2 py-1 text-sm text-blue-900 focus:border-blue-400 focus:outline-none",placeholder:"Message to Print","onUpdate:modelValue":n[0]||(n[0]=s=>i.message=s)},null,512),[[me,i.message]]),en,g("h1",tn,le(i.value),1)])]),_:1}))}};const on={key:1,class:"absolute bottom-0 right-0 bg-color w-1/3 h-1/2 px-5 pb-2 z-10 text-white rounded-tl-xl font"},sn={class:"sticky top-0 border-b bg-color pt-2 flex justify-between items-center"},an=F(" Terminal Code:Node/home/board@ "),ln={readonly:"readonly",class:"w-full h-5/6 bg-color text-white p-1 focus:outline-0"},dn={__name:"Terminal",setup(b){const p=U(),i=pe(!0);return(y,v)=>{const w=de("font-icon");return i.value==!1?(j(),ee("button",{key:0,class:"absolute bottom-5 right-5 z-10 bg-color text-white p-3 rounded-lg transition duration-300 hover:bg-blue-900",onClick:v[0]||(v[0]=h=>i.value=!i.value)},[x(w,{icon:"fa-solid fa-terminal"})])):(j(),ee("div",on,[g("div",sn,[x(w,{icon:"fa-solid fa-terminal"}),an,g("button",{class:"transition duration-300 hover:bg-blue-900 p-1 rounded-md m-1",onClick:v[1]||(v[1]=h=>i.value=!i.value)},[x(w,{icon:"fa-regular fa-rectangle-xmark",class:"text-xl"})])]),g("textarea",ln,le(P(p).pythonCode)+`\r
    `,1)]))}}},rn=Be(dn,[["__scopeId","data-v-c0b1c33c"]]),cn=g("h1",null,"El programa se ha Guardado con Exito!",-1),un=g("h1",null,"Tenemos Problemas al Guardar el Programa",-1),hn={__name:"AlertSave",setup(b){const p=pe(!1),i=pe(!1);return we("emitter").on("showNotification",v=>{v==200&&(p.value=!0),i.value=!0,setTimeout(()=>{i.value=!1},2e3)}),(v,w)=>{const h=de("font-icon");return p.value?(j(),ee("div",{key:0,class:Q(["flex items-center justify-center text-center font-semibold p-1 bg-blue-300/50 text-blue-900 h-12 m-3 z-10 rounded-lg",i.value?"visible":"invisible"])},[x(h,{icon:"fa-solid fa-square-check",class:"text-3xl m-1"}),cn],2)):(j(),ee("div",{key:1,class:Q(["flex items-center justify-center text-center font-semibold p-1 bg-red-400/50 text-red-800 h-16 m-3 z-10 rounded-lg",i.value?"visible":"invisible"])},[x(h,{icon:"fa-solid fa-rectangle-xmark",class:"text-3xl m-1"}),un],2))}}},pn=[{name:"variable",in:1,out:1},{name:"assign",in:1,out:1},{name:"math",in:2,out:1},{name:"logic",in:2,out:2},{name:"cicle",in:2,out:1},{name:"print",in:1,out:0}],fn={__name:"MainBoard",setup(b){const p=qe({}),i={version:3,h:Ie,render:Pe},y=ie();y.appContext.app._context.config.globalProperties.$df=p;const v=Oe(pn),w=we("emitter"),h=U();Ne(()=>{const o=document.getElementById("drawflow");p.value=new Nt(o,i,y.appContext.app._context),p.value.reroute=!0,p.value.start(),n(),p.value.import(h.drawflowProgram)}),w.on("saveProgram",()=>{let o=p.value.export();h.drawflowProgram=o});const e=o=>{o.preventDefault();let l=o.dataTransfer.getData("node");const r=v.find(a=>a.name==l);let{x:f,y:d}=s(o.clientX,o.clientY);p.value.addNode(r.name,r.in,r.out,f,d,r.name,{},r.name,"vue")},t=o=>{o.preventDefault()},n=()=>{p.value.registerNode("variable",$t,{},{}),p.value.registerNode("assign",qt,{},{}),p.value.registerNode("math",Dt,{},{}),p.value.registerNode("logic",Ut,{},{}),p.value.registerNode("cicle",Gt,{},{}),p.value.registerNode("print",nn,{},{}),p.value.registerNode("DfControl",Lt,{},{}),p.value.addNode("DfControl",0,0,0,0,"dfcontrol",{},"DfControl","vue")};function s(o,l){let r=o*(p.value.precanvas.clientWidth/(p.value.precanvas.clientWidth*p.value.zoom))-p.value.precanvas.getBoundingClientRect().x*(p.value.precanvas.clientWidth/(p.value.precanvas.clientWidth*p.value.zoom)),f=l*(p.value.precanvas.clientHeight/(p.value.precanvas.clientHeight*p.value.zoom))-p.value.precanvas.getBoundingClientRect().y*(p.value.precanvas.clientHeight/(p.value.precanvas.clientHeight*p.value.zoom));return{x:r,y:f}}return(o,l)=>(j(),ee("div",{id:"drawflow",onDrop:l[0]||(l[0]=r=>e(r)),onDragover:l[1]||(l[1]=r=>t(r))},[x(rn),x(hn)],32))}},mn={class:"flex"},_n={class:"flex-col w-full"},wn={__name:"Board",setup(b){return(p,i)=>(j(),ee("div",mn,[x(ft),g("div",_n,[x(Rt),x(fn)])]))}};export{wn as default};
