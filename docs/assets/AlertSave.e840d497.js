import{l as w,f as d,r as y,o as c,c as m,n as g,b as u,a as p,t as f,i as v}from"./index.be736750.js";const b=w("program",{state:()=>({idProgram:"",nameProgram:"",descriptionProgram:"",nodesProgram:[],drawflowProgram:{drawflow:{Home:{data:{}}}},pythonCode:""}),getters:{getNode:e=>t=>e.nodesProgram.find(o=>o.nodeId===t)},actions:{addNodeProgram(e){this.nodesProgram.push(e)},removeNodeProgram(e){this.nodesProgram=this.nodesProgram.filter(t=>t.nodeId!==e)},resetProgram(){this.idProgram="",this.nameProgram="",this.descriptionProgram="",this.nodesProgram=[],this.drawflowProgram={drawflow:{Home:{data:{}}}},this.pythonCode=""},setProgram(e){this.idProgram=e.id,this.nameProgram=e.name,this.descriptionProgram=e.description,this.drawflowProgram=JSON.parse(e.drawflow),this.pythonCode="",this.nodesProgram=[]}}}),x=()=>Math.floor(Math.random()*1e10).toString(),P=e=>(e.idProgram==""&&(e.idProgram=x()),{id:e.idProgram,name:e.nameProgram,description:e.descriptionProgram,nodes:JSON.stringify(e.nodesProgram),drawflow:S(e.drawflowProgram,e.nodesProgram)}),S=(e,t)=>{const o=e.drawflow.Home.data;for(const a in o){const r=o[a],s=t.find(l=>l.nodeId==r.id);r.data=s}return JSON.stringify(e)},N=e=>e().appContext.config.globalProperties.$df.value,i=b(),n="https://18jypoqcu5.execute-api.us-east-1.amazonaws.com/staging",_=e=>{fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then(o=>o.json()).then(o=>{e(o)})},T=async e=>{const t={method:"GET",headers:{"Content-Type":"application/json"}},o=new URLSearchParams({id:e});await fetch(`${n}?${o}`,t).then(a=>a.json()).then(a=>{i.setProgram(a)})},D=async e=>{let t=P(i);const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};await fetch(`${n}`,o).then(a=>{e(a.status)})},O=async e=>{let t=P(i);const o={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};await fetch(`${n}`,o).then(a=>{e(a.status)})},$=async(e,t)=>{const o={method:"DELETE",headers:{"Content-Type":"application/json"}},a=new URLSearchParams({id:e});await fetch(`${n}?${a}`,o).then(r=>{t(r.status)})},k=async()=>{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:i.pythonCode})};await fetch(`${n}/runcode`,e).then(t=>t.json()).then(t=>{i.pythonCode=t})},j={class:"relative"},J={__name:"AlertSave",setup(e){const t=d(!1),o=d(""),a=d(!1);return v("emitter").on("showNotification",s=>{o.value=s.messageFall,s.status>=200&&s.status<=299&&(t.value=!0,o.value=s.messageOk),a.value=!0,setTimeout(()=>{a.value=!1},3e3)}),(s,l)=>{const h=y("font-icon");return c(),m("div",j,[t.value?(c(),m("div",{key:0,class:g(["flex items-center justify-center text-center font-semibold p-1 bg-blue-300/50 text-blue-900 h-12 m-3 z-10 rounded-lg",a.value?"visible":"hidden"])},[u(h,{icon:"fa-solid fa-square-check",class:"text-3xl m-1"}),p("h1",null,f(o.value),1)],2)):(c(),m("div",{key:1,class:g(["flex items-center justify-center text-center font-semibold p-1 bg-red-400/50 text-red-800 h-16 m-3 z-10 rounded-lg",a.value?"visible":"hidden"])},[u(h,{icon:"fa-solid fa-rectangle-xmark",class:"text-3xl m-1"}),p("h1",null,f(o.value),1)],2))])}}};export{J as _,_ as a,O as b,N as c,$ as d,T as g,k as r,D as s,b as u};
